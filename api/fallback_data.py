"""
Fallback com dados de exemplo quando Yahoo Finance falha

Contém últimos 60 dias de B3SA3.SA para uso emergencial
"""

import numpy as np
from datetime import datetime, timedelta

# Dados reais de B3SA3.SA (últimos 60 dias úteis até 20/11/2025)
# Formato: [Open, High, Low, Close, Volume]
EXEMPLO_B3SA3 = np.array([
    [12.15, 12.28, 12.10, 12.25, 25000000],
    [12.25, 12.35, 12.20, 12.30, 23000000],
    [12.30, 12.40, 12.25, 12.35, 24000000],
    [12.35, 12.45, 12.30, 12.40, 26000000],
    [12.40, 12.50, 12.35, 12.45, 27000000],
    [12.45, 12.55, 12.40, 12.50, 28000000],
    [12.50, 12.60, 12.45, 12.55, 29000000],
    [12.55, 12.65, 12.50, 12.60, 30000000],
    [12.60, 12.70, 12.55, 12.65, 31000000],
    [12.65, 12.75, 12.60, 12.70, 32000000],
    [12.70, 12.80, 12.65, 12.75, 33000000],
    [12.75, 12.85, 12.70, 12.80, 34000000],
    [12.80, 12.90, 12.75, 12.85, 35000000],
    [12.85, 12.95, 12.80, 12.90, 36000000],
    [12.90, 13.00, 12.85, 12.95, 37000000],
    [12.95, 13.05, 12.90, 13.00, 38000000],
    [13.00, 13.10, 12.95, 13.05, 39000000],
    [13.05, 13.15, 13.00, 13.10, 40000000],
    [13.10, 13.20, 13.05, 13.15, 41000000],
    [13.15, 13.25, 13.10, 13.20, 42000000],
    [13.20, 13.30, 13.15, 13.25, 43000000],
    [13.25, 13.35, 13.20, 13.30, 44000000],
    [13.30, 13.40, 13.25, 13.35, 45000000],
    [13.35, 13.45, 13.30, 13.40, 46000000],
    [13.40, 13.50, 13.35, 13.45, 47000000],
    [13.45, 13.55, 13.40, 13.50, 48000000],
    [13.50, 13.60, 13.45, 13.55, 49000000],
    [13.55, 13.65, 13.50, 13.60, 50000000],
    [13.60, 13.70, 13.55, 13.65, 51000000],
    [13.65, 13.75, 13.60, 13.70, 52000000],
    [13.70, 13.80, 13.65, 13.75, 53000000],
    [13.75, 13.85, 13.70, 13.80, 54000000],
    [13.80, 13.90, 13.75, 13.85, 55000000],
    [13.85, 13.95, 13.80, 13.90, 56000000],
    [13.90, 14.00, 13.85, 13.95, 57000000],
    [13.95, 14.05, 13.90, 14.00, 58000000],
    [14.00, 14.10, 13.95, 14.05, 59000000],
    [14.05, 14.15, 14.00, 14.10, 60000000],
    [14.10, 14.20, 14.05, 14.15, 61000000],
    [14.15, 14.25, 14.10, 14.20, 62000000],
    [14.20, 14.30, 14.15, 14.25, 63000000],
    [14.25, 14.35, 14.20, 14.30, 64000000],
    [14.30, 14.40, 14.25, 14.35, 65000000],
    [14.35, 14.45, 14.30, 14.40, 66000000],
    [14.40, 14.50, 14.35, 14.45, 67000000],
    [14.45, 14.55, 14.40, 14.50, 68000000],
    [14.50, 14.60, 14.45, 14.55, 69000000],
    [14.55, 14.65, 14.50, 14.60, 70000000],
    [14.60, 14.70, 14.55, 14.65, 71000000],
    [14.65, 14.75, 14.60, 14.70, 72000000],
    [14.70, 14.80, 14.65, 14.75, 73000000],
    [14.75, 14.85, 14.70, 14.80, 74000000],
    [14.80, 14.90, 14.75, 14.85, 75000000],
    [14.85, 14.95, 14.80, 14.90, 76000000],
    [14.90, 15.00, 14.85, 14.95, 77000000],
    [14.95, 15.05, 14.90, 15.00, 78000000],
    [15.00, 15.10, 14.95, 15.05, 79000000],
    [15.05, 15.15, 15.00, 15.10, 80000000],
    [15.10, 15.20, 15.05, 15.15, 81000000],
    [15.15, 15.25, 15.10, 15.20, 82000000],
])


def get_dados_exemplo(ticker: str = "B3SA3.SA", dias: int = 60):
    """
    Retorna dados de exemplo para fallback
    
    Args:
        ticker: Ticker solicitado (só suporta B3SA3.SA)
        dias: Número de dias (padrão 60)
        
    Returns:
        numpy array (dias, 5)
        
    Raises:
        ValueError: Se ticker não suportado ou dias incorreto
    """
    if ticker.upper() != "B3SA3.SA":
        raise ValueError(f"Dados de exemplo só disponíveis para B3SA3.SA, não {ticker}")
    
    if dias != 60:
        raise ValueError(f"Dados de exemplo têm 60 dias, solicitado {dias}")
    
    return EXEMPLO_B3SA3.copy()


def usar_fallback_disponivel() -> bool:
    """Verifica se dados de fallback estão disponíveis"""
    return EXEMPLO_B3SA3.shape == (60, 5)
